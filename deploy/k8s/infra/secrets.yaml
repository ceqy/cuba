# ============================================================================
# CUBA ERP - Kubernetes Secrets Configuration
# ============================================================================
# SECURITY WARNING: This file contains base64-encoded secrets.
#
# PRODUCTION DEPLOYMENT:
# 1. DO NOT commit this file to version control
# 2. Use external secret management (Vault, AWS Secrets Manager, etc.)
# 3. Generate strong random secrets using: openssl rand -base64 32
# 4. Rotate secrets regularly
# ============================================================================

---
# PostgreSQL Database Credentials
apiVersion: v1
kind: Secret
metadata:
  name: postgres-credentials
  namespace: cuba-system
type: Opaque
data:
  # Default values for development ONLY
  # PRODUCTION: Replace with strong passwords
  # postgres:postgres (base64)
  username: cG9zdGdyZXM=
  # CHANGE_ME_IN_PRODUCTION (base64)
  password: Q0hBTkdFX01FX0lOX1BST0RVQ1RJT04=

---
# JWT Secret for Auth Service
apiVersion: v1
kind: Secret
metadata:
  name: auth-jwt-secret
  namespace: cuba-iam
type: Opaque
data:
  # PRODUCTION: Generate using: openssl rand -base64 32
  # cuba-auth-jwt-secret-change-in-production (base64)
  jwt-secret: Y3ViYS1hdXRoLWp3dC1zZWNyZXQtY2hhbmdlLWluLXByb2R1Y3Rpb24=

---
# JWT Secret for OAuth Service
apiVersion: v1
kind: Secret
metadata:
  name: oauth-jwt-secret
  namespace: cuba-iam
type: Opaque
data:
  # PRODUCTION: Generate using: openssl rand -base64 32
  # cuba-oauth-jwt-secret-change-in-production (base64)
  jwt-secret: Y3ViYS1vYXV0aC1qd3Qtc2VjcmV0LWNoYW5nZS1pbi1wcm9kdWN0aW9u

---
# Database URLs for all services
apiVersion: v1
kind: Secret
metadata:
  name: database-urls
  namespace: cuba-system
type: Opaque
stringData:
  # IAM Services
  iam-auth-db-url: "postgresql://postgres:CHANGE_ME_IN_PRODUCTION@cuba-postgres.cuba-system.svc.cluster.local:5432/cuba_iam"
  iam-oauth-db-url: "postgresql://postgres:CHANGE_ME_IN_PRODUCTION@cuba-postgres.cuba-system.svc.cluster.local:5432/cuba_iam"
  iam-rbac-db-url: "postgresql://postgres:CHANGE_ME_IN_PRODUCTION@cuba-postgres.cuba-system.svc.cluster.local:5432/cuba_iam"

  # Finance Services
  fi-gl-db-url: "postgresql://postgres:CHANGE_ME_IN_PRODUCTION@cuba-postgres.cuba-system.svc.cluster.local:5432/cuba_fi_gl"
  fi-ap-db-url: "postgresql://postgres:CHANGE_ME_IN_PRODUCTION@cuba-postgres.cuba-system.svc.cluster.local:5432/cuba_fi_ap"
  fi-ar-db-url: "postgresql://postgres:CHANGE_ME_IN_PRODUCTION@cuba-postgres.cuba-system.svc.cluster.local:5432/cuba_fi_ar"
  fi-co-db-url: "postgresql://postgres:CHANGE_ME_IN_PRODUCTION@cuba-postgres.cuba-system.svc.cluster.local:5432/cuba_fi_co"
  fi-tr-db-url: "postgresql://postgres:CHANGE_ME_IN_PRODUCTION@cuba-postgres.cuba-system.svc.cluster.local:5432/cuba_fi_tr"
  fi-coa-db-url: "postgresql://postgres:CHANGE_ME_IN_PRODUCTION@cuba-postgres.cuba-system.svc.cluster.local:5432/cuba_fi_coa"

---
# Secret generation script reference
# Run this to generate production secrets:
#
# kubectl create secret generic postgres-credentials \
#   --from-literal=username=postgres \
#   --from-literal=password=$(openssl rand -base64 32) \
#   --namespace=cuba-system
#
# kubectl create secret generic auth-jwt-secret \
#   --from-literal=jwt-secret=$(openssl rand -base64 32) \
#   --namespace=cuba-iam
#
# kubectl create secret generic oauth-jwt-secret \
#   --from-literal=jwt-secret=$(openssl rand -base64 32) \
#   --namespace=cuba-iam
