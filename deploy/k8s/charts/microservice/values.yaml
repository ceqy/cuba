# Default values for microservice.
replicaCount: 2

image:
  repository: cuba-erp/service
  pullPolicy: IfNotPresent
  tag: "latest"

nameOverride: ""
fullnameOverride: ""

service:
  type: ClusterIP
  grpcPort: 50051
  metricsPort: 9090
  protocol: TCP

env:
  RUST_LOG: "info"
  DATABASE_URL: "postgres://postgres:postgres@postgres-service:5432/cuba"

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

livenessProbe:
  grpc:
    port: 50051
  initialDelaySeconds: 10
  periodSeconds: 10

readinessProbe:
  grpc:
    port: 50051
  initialDelaySeconds: 5
  periodSeconds: 5

nodeSelector: {}
tolerations: []
affinity: {}

# Istio sidecar injection
podAnnotations:
  sidecar.istio.io/inject: "true"

# Database migration job
migration:
  enabled: true
  image: cuba-erp/migrator
