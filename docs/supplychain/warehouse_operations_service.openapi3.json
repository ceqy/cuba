{
  "openapi": "3.1.0",
  "info": {
    "title": "Warehouse Operations Service API",
    "version": "version not set",
    "description": "仓库作业服务 - 上架下架、拣货包装、Wave管理",
    "contact": {
      "name": "Warehouse Ops Team",
      "email": "warehouse-ops@enterprise.com"
    }
  },
  "tags": [
    {
      "name": "WarehouseOperationsService",
      "description": "WarehouseOperationsService"
    }
  ],
  "paths": {
    "/api/v1/supplychain/partial-confirm-item": {
      "post": {
        "summary": "部分确认行项目 (New)",
        "operationId": "WarehouseOperationsService_PartialConfirmItem",
        "responses": {
          "200": {
            "description": "A successful response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/warehouseConfirmTransferOrderResponse"
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/rpcStatus"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/warehousePartialConfirmItemRequest"
              }
            }
          },
          "required": true
        },
        "tags": [
          "WarehouseOperationsService"
        ]
      }
    },
    "/api/v1/supplychain/print-transfer-order-label": {
      "post": {
        "summary": "打印转储订单标签 (New)",
        "operationId": "WarehouseOperationsService_PrintTransferOrderLabel",
        "responses": {
          "200": {
            "description": "A successful response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/warehousePrintLabelResponse"
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/rpcStatus"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/warehousePrintLabelRequest"
              }
            }
          },
          "required": true
        },
        "tags": [
          "WarehouseOperationsService"
        ]
      }
    },
    "/api/v1/supplychain/transfer-order": {
      "get": {
        "summary": "获取转储订单详情",
        "operationId": "WarehouseOperationsService_GetTransferOrder",
        "responses": {
          "200": {
            "description": "A successful response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/warehouseTransferOrderDetail"
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/rpcStatus"
                }
              }
            }
          }
        },
        "parameters": [
          {
            "name": "warehouse_number",
            "description": "仓库号",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "transfer_order_number",
            "description": "转储订单号",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "context.request_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "context.tenant_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "context.user_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "context.roles",
            "in": "query",
            "required": false,
            "explode": true,
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          {
            "name": "context.idempotency_key",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "context.locale",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "context.timestamp",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "context.source_system",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "context.correlation_id",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "tags": [
          "WarehouseOperationsService"
        ]
      },
      "post": {
        "summary": "基于转储需求 (TR) 或其他参考凭证创建转储订单 (TO)",
        "operationId": "WarehouseOperationsService_CreateTransferOrder",
        "responses": {
          "200": {
            "description": "A successful response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/warehouseTransferOrderResponse"
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/rpcStatus"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/warehouseCreateTransferOrderRequest"
              }
            }
          },
          "required": true
        },
        "tags": [
          "WarehouseOperationsService"
        ]
      }
    },
    "/api/v1/supplychain/transfer-order/confirm": {
      "post": {
        "summary": "确认转储订单或其行项目",
        "operationId": "WarehouseOperationsService_ConfirmTransferOrder",
        "responses": {
          "200": {
            "description": "A successful response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/warehouseConfirmTransferOrderResponse"
                }
              }
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/rpcStatus"
                }
              }
            }
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/warehouseConfirmTransferOrderRequest"
              }
            }
          },
          "required": true
        },
        "tags": [
          "WarehouseOperationsService"
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "commonApiMessage": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "code": {
            "type": "string"
          },
          "message": {
            "type": "string"
          },
          "target": {
            "type": "string"
          }
        }
      },
      "commonAuditData": {
        "type": "object",
        "properties": {
          "created_by": {
            "type": "string"
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "changed_by": {
            "type": "string"
          },
          "changed_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "commonMovementType": {
        "type": "string",
        "enum": [
          "MOVEMENT_TYPE_UNSPECIFIED",
          "MOVEMENT_TYPE_GOODS_RECEIPT",
          "MOVEMENT_TYPE_GOODS_ISSUE",
          "MOVEMENT_TYPE_TRANSFER_POSTING",
          "MOVEMENT_TYPE_STOCK_TRANSFER",
          "MOVEMENT_TYPE_RETURN_DELIVERY",
          "MOVEMENT_TYPE_CANCELLATION"
        ],
        "default": "MOVEMENT_TYPE_UNSPECIFIED",
        "description": "- MOVEMENT_TYPE_GOODS_RECEIPT: 101\n - MOVEMENT_TYPE_GOODS_ISSUE: 201, 261\n - MOVEMENT_TYPE_TRANSFER_POSTING: 301, 311\n - MOVEMENT_TYPE_STOCK_TRANSFER: 351, 641\n - MOVEMENT_TYPE_RETURN_DELIVERY: 122\n - MOVEMENT_TYPE_CANCELLATION: 102, 202",
        "title": "移动类型 (Inventory)"
      },
      "commonQuantityValue": {
        "type": "object",
        "properties": {
          "unit_code": {
            "type": "string"
          },
          "value": {
            "type": "string"
          }
        }
      },
      "commonRequestContext": {
        "type": "object",
        "properties": {
          "request_id": {
            "type": "string"
          },
          "tenant_id": {
            "type": "string"
          },
          "user_id": {
            "type": "string"
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "idempotency_key": {
            "type": "string"
          },
          "locale": {
            "type": "string"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time"
          },
          "source_system": {
            "type": "string"
          },
          "correlation_id": {
            "type": "string"
          }
        }
      },
      "protobufAny": {
        "type": "object",
        "properties": {
          "@type": {
            "type": "string"
          }
        },
        "additionalProperties": {}
      },
      "rpcStatus": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "format": "int32"
          },
          "message": {
            "type": "string"
          },
          "details": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/protobufAny"
            }
          }
        }
      },
      "warehouseConfirmTransferOrderItem": {
        "type": "object",
        "properties": {
          "item_number": {
            "type": "integer",
            "format": "int32",
            "title": "行项目号"
          },
          "actual_quantity": {
            "$ref": "#/components/schemas/commonQuantityValue"
          },
          "difference_quantity": {
            "$ref": "#/components/schemas/commonQuantityValue"
          }
        },
        "title": "待确认的转储订单行项目"
      },
      "warehouseConfirmTransferOrderRequest": {
        "type": "object",
        "properties": {
          "warehouse_number": {
            "type": "string",
            "title": "仓库号"
          },
          "transfer_order_number": {
            "type": "string",
            "title": "转储订单号"
          },
          "items_to_confirm": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/warehouseConfirmTransferOrderItem"
            },
            "title": "要确认的行项目列表 (如果为空，则确认整个订单)"
          },
          "context": {
            "$ref": "#/components/schemas/commonRequestContext"
          }
        },
        "title": "确认转储订单请求"
      },
      "warehouseConfirmTransferOrderResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "title": "操作是否成功"
          },
          "messages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/commonApiMessage"
            },
            "title": "从核心ERP返回的消息列表"
          }
        },
        "title": "确认转储订单响应"
      },
      "warehouseCreateTransferOrderRequest": {
        "type": "object",
        "properties": {
          "warehouse_number": {
            "type": "string",
            "title": "仓库号"
          },
          "movement_type": {
            "$ref": "#/components/schemas/commonMovementType"
          },
          "reference_document_number": {
            "type": "string",
            "title": "参考凭证号 (例如，转储需求号或交货单号)"
          },
          "context": {
            "$ref": "#/components/schemas/commonRequestContext"
          }
        },
        "title": "创建转储订单请求"
      },
      "warehousePartialConfirmItemRequest": {
        "type": "object",
        "properties": {
          "warehouse_number": {
            "type": "string"
          },
          "transfer_order_number": {
            "type": "string"
          },
          "item_number": {
            "type": "integer",
            "format": "int32"
          },
          "confirmed_quantity": {
            "$ref": "#/components/schemas/commonQuantityValue"
          },
          "context": {
            "$ref": "#/components/schemas/commonRequestContext"
          }
        },
        "title": "部分确认请求"
      },
      "warehousePrintLabelRequest": {
        "type": "object",
        "properties": {
          "warehouse_number": {
            "type": "string"
          },
          "transfer_order_number": {
            "type": "string"
          },
          "item_number": {
            "type": "integer",
            "format": "int32"
          },
          "printer_id": {
            "type": "string"
          },
          "context": {
            "$ref": "#/components/schemas/commonRequestContext"
          }
        },
        "title": "打印标签请求"
      },
      "warehousePrintLabelResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean"
          },
          "label_data": {
            "type": "string",
            "title": "ZPL or PDF content"
          }
        }
      },
      "warehouseTransferOrderDetail": {
        "type": "object",
        "properties": {
          "transfer_order_number": {
            "type": "string",
            "title": "转储订单号 (原: TANUM)"
          },
          "header": {
            "$ref": "#/components/schemas/warehouseTransferOrderHeader"
          },
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/warehouseTransferOrderItem"
            },
            "title": "行项目列表"
          },
          "audit_data": {
            "$ref": "#/components/schemas/commonAuditData"
          }
        },
        "title": "完整的转储订单详情"
      },
      "warehouseTransferOrderHeader": {
        "type": "object",
        "properties": {
          "warehouse_number": {
            "type": "string",
            "title": "仓库号 (原: LGNUM)"
          },
          "movement_type": {
            "$ref": "#/components/schemas/commonMovementType"
          },
          "reference_document_type": {
            "type": "string",
            "title": "参考凭证类型 (TR, Delivery, etc.) (原: BETYP)"
          },
          "reference_document_number": {
            "type": "string",
            "title": "参考凭证号 (原: BENUM)"
          },
          "created_by": {
            "type": "string",
            "title": "创建人 (原: ERNAM)"
          }
        },
        "title": "转储订单抬头 (参考: LTAK)"
      },
      "warehouseTransferOrderItem": {
        "type": "object",
        "properties": {
          "item_number": {
            "type": "integer",
            "format": "int32",
            "title": "转储订单行项目号 (原: TAPOS)"
          },
          "material": {
            "type": "string",
            "title": "物料编号 (原: MATNR)"
          },
          "target_quantity": {
            "$ref": "#/components/schemas/commonQuantityValue"
          },
          "actual_quantity": {
            "$ref": "#/components/schemas/commonQuantityValue"
          },
          "source_storage_type": {
            "type": "string",
            "title": "源存储类型 (原: VLTYP)"
          },
          "source_storage_bin": {
            "type": "string",
            "title": "源存储仓位 (原: VLPLA)"
          },
          "destination_storage_type": {
            "type": "string",
            "title": "目标存储类型 (原: NLTYP)"
          },
          "destination_storage_bin": {
            "type": "string",
            "title": "目标存储仓位 (原: NLPLA)"
          },
          "batch": {
            "type": "string",
            "title": "批次 (原: CHARG)"
          },
          "confirmation_indicator": {
            "type": "boolean",
            "title": "确认标识 (原: KQUIT)"
          }
        },
        "title": "转储订单行项目 (参考: LTAP)"
      },
      "warehouseTransferOrderResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "title": "操作是否成功"
          },
          "transfer_order_number": {
            "type": "string",
            "title": "生成的转储订单号"
          },
          "messages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/commonApiMessage"
            },
            "title": "从核心ERP返回的消息列表"
          }
        },
        "title": "转储订单响应"
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "Enter your JWT token (e.g. from Login API)"
      }
    }
  },
  "security": [
    {
      "BearerAuth": []
    }
  ]
}