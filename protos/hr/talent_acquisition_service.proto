// ============================================================================
// /hr/talent-acquisition-service (版本 2.0)
// 描述: 提供与人才招聘相关的功能，如职位申请管理和候选人跟踪。
//       字段设计参考核心ERP的人才管理模块表结构。
// ============================================================================

syntax = "proto3";

package enterprise.hr.talent;

option java_package = "com.enterprise.hr.talent.v2";
option java_multiple_files = true;
option go_package = "github.com/enterprise-extensions/hr/talent/v2;talent";

import "google/protobuf/timestamp.proto";
import "common/common.proto";

// ============================================================================
// 服务定义: TalentAcquisitionService
// ============================================================================

service TalentAcquisitionService {
  // 获取职位申请列表
  rpc ListJobApplications(ListJobApplicationsRequest) returns (ListJobApplicationsResponse);

  // 获取单个职位申请详情
  rpc GetJobApplication(GetJobApplicationRequest) returns (JobApplicationDetail);

  // 更新职位申请状态
  rpc UpdateJobApplicationStatus(UpdateJobApplicationStatusRequest) returns (UpdateJobApplicationStatusResponse);
}

// ============================================================================
// 数据结构: JobApplication (职位申请)
// ============================================================================

// 职位申请详情
message JobApplicationDetail {
  // 申请ID
  string application_id = 1;
  // 职位ID
  string requisition_id = 2;
  // 职位名称
  string requisition_title = 3;
  // 候选人信息
  CandidateInfo candidate = 4;
  // 申请状态 (例如, New, In-Process, Hired, Rejected)
  string status = 5;
  // 申请日期
  google.protobuf.Timestamp application_date = 6;
  // 附件列表 (简历、求职信等)
  repeated ApplicationAttachment attachments = 7;
}

// 候选人信息
message CandidateInfo {
  // 候选人ID
  string candidate_id = 1;
  // 姓
  string first_name = 2;
  // 名
  string last_name = 3;
  // 邮箱
  string email = 4;
  // 电话
  string phone = 5;
}

// 申请附件
message ApplicationAttachment {
  // 附件ID
  string attachment_id = 1;
  // 文件名
  string file_name = 2;
  // 附件类型 (CV, CoverLetter)
  string attachment_type = 3;
}

// ============================================================================
// RPC 消息定义
// ============================================================================

// 查询职位申请请求
message ListJobApplicationsRequest {
  // 职位ID
  string requisition_id = 1;
  // 申请状态
  string status = 2;
  // 申请日期范围
  enterprise.common.DateRange application_date_range = 3;
  // 分页请求
  enterprise.common.PaginationRequest pagination = 4;
}

// 查询职位申请响应
message ListJobApplicationsResponse {
  // 申请摘要列表
  repeated JobApplicationSummary applications = 1;
  // 分页响应
  enterprise.common.PaginationResponse pagination = 2;
}

// 职位申请摘要
message JobApplicationSummary {
  // 申请ID
  string application_id = 1;
  // 职位名称
  string requisition_title = 2;
  // 候选人姓名
  string candidate_name = 3;
  // 申请状态
  string status = 4;
  // 申请日期
  google.protobuf.Timestamp application_date = 5;
}

// 获取职位申请详情请求
message GetJobApplicationRequest {
  // 申请ID
  string application_id = 1;
}

// 更新职位申请状态请求
message UpdateJobApplicationStatusRequest {
  // 申请ID
  string application_id = 1;
  // 新的状态
  string new_status = 2;
  // 备注
  string notes = 3;
}

// 更新职位申请状态响应
message UpdateJobApplicationStatusResponse {
  // 操作是否成功
  bool success = 1;
  // 从核心ERP返回的消息列表
  repeated enterprise.common.ApiMessage messages = 2;
}
